```{python}
#| echo: false
from IPython.display import Markdown, display

country_name = 'Myanmar'
ecosystem_name = 'Tropical forest'
ecosystem_names_local = [{'name': 'Ecosystem Name 1', 'reference': '@bibtexReference1'}, {'name': 'Ecosystem Name 2', 'reference': '@bibtexReference2'}]
authors = ['J. Smith', 'J. Pérez']
biome = 'Tropical and subtropical forests (T1)'
functional_group = 'T1.1'
global_classification = 'MMR-TSAMPLE'
ecosystem_photo = 'images/MMR-TSAMPLE_photo.png'
ecosystem_map = 'images/MMR-TSAMPLE_map.png'
ecosystem_image = {
    'asset_id': 'projects/goog-rle-assessments/assets/mm_ecosys_v7b',
    'pixel_value': '53'
}
iucn_status = 'Endangered'
```

<!-- Title -->

## Tropical forest {.unnumbered}

<!-- Authors -->

[Authors:]{.parameter .ecosystem-description-list}
`{python} ", ".join(authors)`

<!-- Local ecosystem names -->

```{python}
#| echo: false
ecosystem_name_str = Markdown(", ".join([
    f"{ecosystem_name['name']} [{ecosystem_name['reference']}]"
    for ecosystem_name in ecosystem_names_local
]))
```

[`{python} country_name` ecosystem names:]{.parameter .ecosystem-description-list}
`{python} ecosystem_name_str`
     
 

<!-- Biome -->

[Biome:]{.parameter .ecosystem-description-list}
Tropical and subtropical forests (T1)

<!-- Functional Group -->

[Functional Group:]{.parameter .ecosystem-description-list}
T1.1

<!-- Global classification -->

[Global classification:]{.parameter .ecosystem-description-list}
MMR-TSAMPLE

<!-- IUCN Status -->

[IUCN Status:]{.parameter .ecosystem-description-list}
Endangered

<!-- Ecosystem Photo -->
[Ecosystem Photo]{.parameter .ecosystem-description-list}

      
::: {.callout-important title="Unable to find ecosystem photo image"}
```{python}
#| echo: false
Markdown(f'Unable to find ecosystem photo image named: **ecosystem_assessments/{global_classification}/{ecosystem_photo}**')
```
:::
     

    

  

<!-- Ecosystem Map -->
[Ecosystem Map]{.parameter .ecosystem-description-list}

  
::: {.callout-important title="Unable to find ecosystem map image"}
```{python}
#| echo: false
Markdown(f'Unable to find ecosystem map image named: **ecosystem_assessments/{global_classification}/{ecosystem_map}**')
```
:::
 

  
  

<!-- Description -->

[Description]{.parameter .ecosystem-description-list}
The ecosystem description goes here.


<!-- Distribution -->

[Distribution]{.parameter .ecosystem-description-list}
The ecosystem distribution text goes here.


<!-- Characteristic Native Biota -->

[Characteristic Native Biota]{.parameter .ecosystem-description-list}
The ecosystem's characteristic native biota text goes here.


<!-- Abiotic environment -->

[Abiotic environment]{.parameter .ecosystem-description-list}
The ecosystem's abiotic environment text goes here.


<!-- Key processes and interactions -->

[Key processes and interactions]{.parameter .ecosystem-description-list}
The ecosystem's key processes and interactions text goes here.


<!-- Major threats -->

[Major threats]{.parameter .ecosystem-description-list}
The ecosystem's major threats text goes here.


<!-- Ecosystem collapse definition -->

[Ecosystem collapse definition]{.parameter .ecosystem-description-list}
The ecosystem's ecosystem collapse definition text goes here.


<!-- Assessment summary -->

[Assessment summary]{.parameter .ecosystem-description-list}
**The ecosystem's assessment summary text goes here.
**

<!-- Assessment information -->

[Assessment information]{.parameter .ecosystem-description-list}
<table class="criteria-table">
  <thead>
    <tr>
      <th colspan="2">Criteria</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td rowspan="4">Criterion A</td>
      <td>A1</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>A2a</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>A2b</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>A3</td>
      <td>NE</td>
    </tr>
    <tr>
      <td rowspan="4">Criterion B</td>
      <td>B1</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>B2</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>subcriteria</td>
      <td>['subcriteria1', 'subcriteria2', '...']</td>
    </tr>
    <tr>
      <td>B3</td>
      <td>NE</td>
    </tr>
    <tr>
      <td rowspan="4">Criterion C</td>
      <td>C1</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>C2a</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>C2b</td>
      <td>NE</td>
    </tr>
    <tr>
      <td>C3</td>
      <td>NE</td>
    </tr>
    <tr>
      <td rowspan="4">Criterion D</td>
      <td>D1</td>
      <td>NE</td>
    </tr>
    <tr>
        <td>D2a</td>
        <td>NE</td>
      </tr>
      <tr>
        <td>D2b</td>
        <td>NE</td>
      </tr>
      <tr>
        <td>D3</td>
        <td>NE</td>
      </tr>
      <tr>
        <td>Criterion E</td>
        <td>E</td>
        <td>NE</td>
      </tr>
    </tbody>
  </table>

<!-- Assessment outcome -->

[Assessment outcome]{.parameter .ecosystem-description-list}
**The ecosystem's assessment outcome text goes here.
**

<!-- Year published -->

[Year published]{.parameter .ecosystem-description-list}
1999


<!-- Date assessed -->

[Date assessed]{.parameter .ecosystem-description-list}
24th January 2000

<!-- Assessment credits -->

[Assessment credits]{.parameter .ecosystem-description-list}

Assessed by: Jane Smith

Reviewed by: Jose Pérez

Contributions by: Kevin Bacon

<!-- Criterion A -->

[Criterion A]{.parameter .ecosystem-description-list}
The ecosystem's criterion A description text goes here.


<!-- Criterion B -->

[Criterion B]{.parameter .ecosystem-description-list}
{'text': "The ecosystem's criterion B description text goes here."}

[TEST]{.parameter .ecosystem-description-list}

```{python}
#| echo: true
import ee
from gee_redlist.ee_rle import make_eoo, area_km2
from google.auth import default

# Use Application Default Credentials (ADC) from GOOGLE_APPLICATION_CREDENTIALS
# This works both locally (after gcloud auth) and in CI/CD (with Workload Identity)
credentials, _ = default(scopes=[
    'https://www.googleapis.com/auth/earthengine',
    'https://www.googleapis.com/auth/cloud-platform'
])
ee.Initialize(credentials=credentials, project='goog-rle-assessments')

print(f'ecosystem_image: {ecosystem_image}')

asset_id = ecosystem_image['asset_id']
pixel_value = int(ecosystem_image['pixel_value'])

ee_image = (
    ee.Image(ecosystem_image['asset_id'])
      .eq(pixel_value)
      .selfMask()
)
print(f'ee_image: {ee_image.getInfo()}')

eoo_polygon = make_eoo(ee_image)
print(f'EOO area: {area_km2(eoo_polygon).getInfo()} km²')
```

<!-- Criterion C -->

[Criterion C]{.parameter .ecosystem-description-list}
The ecosystem's criterion C description text goes here.


<!-- Criterion D -->

[Criterion D]{.parameter .ecosystem-description-list}
The ecosystem's criterion D description text goes here.


<!-- Criterion E -->

[Criterion E]{.parameter .ecosystem-description-list}
The ecosystem's criterion E description text goes here.
